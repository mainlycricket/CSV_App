"use strict";(self.webpackChunkcsv_app_docs=self.webpackChunkcsv_app_docs||[]).push([[223],{4563:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>t});var s=i(4848),l=i(8453);const r={sidebar_position:4,sidebar_label:"Tables Config",title:"Tables Config"},d=void 0,o={id:"app/tables-config",title:"Tables Config",description:"- Configuration is set for each table individually in tables object of data/appConfig.json",source:"@site/docs/app/tables-config.md",sourceDirName:"app",slug:"/app/tables-config",permalink:"/docs/app/tables-config",draft:!1,unlisted:!1,editUrl:"https://github.com/mainlycricket/CSV_App_Docs/docs/docs/app/tables-config.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,sidebar_label:"Tables Config",title:"Tables Config"},sidebar:"tutorialSidebar",previous:{title:"Auth",permalink:"/docs/app/auth"}},c={},t=[{value:"User &amp; Org Fields",id:"user--org-fields",level:3},{value:"Read &amp; Write Auth",id:"read--write-auth",level:3},{value:"Read Config",id:"read-config",level:3},{value:"Pagination",id:"pagination",level:3}];function a(e){const n={admonition:"admonition",code:"code",em:"em",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components},{Details:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Configuration is set for each table individually in ",(0,s.jsx)(n.code,{children:"tables"})," object of ",(0,s.jsx)(n.code,{children:"data/appConfig.json"})]}),"\n",(0,s.jsxs)(n.li,{children:["Explained with an example of the ",(0,s.jsx)(n.code,{children:"students"})," table configuration"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"user--org-fields",children:"User & Org Fields"}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"Sample User & Org Fields"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "userField": "added_by",\n  "orgFields": {\n    "college_id": "college_id",\n    "Course_Id": "course_id",\n    "Branch_Id": "branch_id"\n  },\n}\n'})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Here, the value for the ",(0,s.jsx)(n.code,{children:"added_by"})," column will be taken from the ",(0,s.jsx)(n.code,{children:"username"})," in JWT token"]}),"\n",(0,s.jsxs)(n.li,{children:["For ",(0,s.jsx)(n.code,{children:"Course_Id"}),", the value will be taken from the ",(0,s.jsx)(n.code,{children:"course_id"})," in JWT token"]}),"\n",(0,s.jsxs)(n.li,{children:["Similary for ",(0,s.jsx)(n.code,{children:"college_id"})," and ",(0,s.jsx)(n.code,{children:"Branch_Id"})]}),"\n"]}),(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["You may want to set the ",(0,s.jsx)(n.code,{children:"college_id"}),", ",(0,s.jsx)(n.code,{children:"Course_Id"}),", ",(0,s.jsx)(n.code,{children:"Branch_Id"})," as foreign keys to the respective ",(0,s.jsx)(n.code,{children:"colleges"}),", ",(0,s.jsx)(n.code,{children:"courses"}),", ",(0,s.jsx)(n.code,{children:"branches"})," table"]})})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["These are the fields whose value can be taken from the JWT ",(0,s.jsx)(n.code,{children:"access_token"})," cookie, in all kinds of request - POST, GET, PUT, DELETE"]}),"\n",(0,s.jsxs)(n.li,{children:["The key in the ",(0,s.jsx)(n.code,{children:"orgFields"})," is the column name in the table and the value is the corresponding column name in the ",(0,s.jsx)(n.em,{children:"auth"})," table"]}),"\n",(0,s.jsxs)(n.li,{children:["The value for the ",(0,s.jsx)(n.code,{children:"userField"})," column will be taken from ",(0,s.jsx)(n.code,{children:"username"})," field from JWT token"]}),"\n",(0,s.jsxs)(n.li,{children:["The value for the ",(0,s.jsx)(n.code,{children:"orgFields"})," column will be taken from the corresponding field from JWT token"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"read--write-auth",children:"Read & Write Auth"}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"Sample Read & Write Auth"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "readAuth": {\n    "basicAuth": true,\n    "allowedRoles": ["principal", "hod"],\n    "priviliges": {\n      "Course_Id": ["principal"],\n      "Branch_Id": ["principal"]\n    }\n  },\n  "writeAuth": {\n    "basicAuth": true,\n    "allowedRoles": ["principal", "hod"],\n    "priviliges": {\n      "Course_Id": ["principal"],\n      "Branch_Id": ["principal"]\n    }\n  }\n}\n'})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Basic Auth is enabled to filter only the logged-in users"}),"\n",(0,s.jsxs)(n.li,{children:["Further, only ",(0,s.jsx)(n.code,{children:"principal"})," and ",(0,s.jsx)(n.code,{children:"hod"})," users are allowed to read from or write to students table"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"principal"})," users should set the ",(0,s.jsx)(n.code,{children:"Course_Id"})," and ",(0,s.jsx)(n.code,{children:"Branch_Id"})," explicitly"]}),"\n",(0,s.jsxs)(n.li,{children:["To put it clearly, the ",(0,s.jsx)(n.code,{children:"principal"})," users can add students to any course & branch while the ",(0,s.jsx)(n.code,{children:"hod"})," users can only add students to their course and branch. Similarly for the read operation"]}),"\n"]})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"readAuth"})," works for GET requests"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"writeAuth"})," works for POST, PUT & DELETE requests"]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"basicAuth"})," flag can be set to enable basic authentication i.e. user must be logged in"]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"allowedRoles"})," array should contain roles which are authorized to access the resource"]}),"\n",(0,s.jsxs)(n.li,{children:["In case you want that some users can explicitly set the values of ",(0,s.jsx)(n.code,{children:"userField"})," or ",(0,s.jsx)(n.code,{children:"orgFields"})," columns, use the ",(0,s.jsx)(n.code,{children:"priviliges"})," object"]}),"\n",(0,s.jsxs)(n.li,{children:["The key should be either the ",(0,s.jsx)(n.code,{children:"userField"})," or one of the ",(0,s.jsx)(n.code,{children:"orgFields"}),", and the value are the user roles who can explicit the values for these columns"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"NOTE",type:"danger",children:(0,s.jsx)(n.p,{children:"basicAuth must be set if either of allowedRoles or priviliges is enabled"})}),"\n",(0,s.jsx)(n.h3,{id:"read-config",children:"Read Config"}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"Sample Read All Config"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "readAllConfig": {\n    "columns": [\n      "Branch_Id",\n      "Student_Id",\n      "Student_Name",\n      "Course_Id",\n      "Student_Father",\n      "college_id"\n    ],\n    "foreignColumns": {\n      "Branch_Id": ["Branch_Id", "Branch_Name"],\n      "Course_Id": ["Course_Id", "Course_Name"],\n      "college_id": ["college_id", "college_name"]\n    }\n  }\n}\n'})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"columns"})," array specifies the fields to be selected"]}),"\n",(0,s.jsxs)(n.li,{children:["For the ",(0,s.jsx)(n.code,{children:"Branch_Id"})," foreign key, the ",(0,s.jsx)(n.code,{children:"Branch_Id"})," and ",(0,s.jsx)(n.code,{children:"Branch_Name"})," columns should be looked up"]}),"\n",(0,s.jsxs)(n.li,{children:["Similarly for the ",(0,s.jsx)(n.code,{children:"Course_Id"})," and ",(0,s.jsx)(n.code,{children:"college_id"})]}),"\n"]})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"readAllConfig"})," is used for the GET all requests while ",(0,s.jsx)(n.code,{children:"readByPkConfig"})," is used for GET by primary key requests"]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"columns"})," array specifies the fields to be selected from the table"]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"foreignColumns"})," specifies the fields which should be looked up from the foreign table"]}),"\n",(0,s.jsxs)(n.li,{children:["If foreign table look-up is not required for a particular field, it need not be there in the ",(0,s.jsx)(n.code,{children:"foreignColumns"})]}),"\n",(0,s.jsx)(n.li,{children:"Hashed fields can't be included"}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"note",type:"danger",children:(0,s.jsxs)(n.p,{children:["If a field is present in ",(0,s.jsx)(n.code,{children:"foreignColumns"}),", it must be present in the ",(0,s.jsx)(n.code,{children:"columns"})," to mark it as selected in the first place"]})}),"\n",(0,s.jsx)(n.h3,{id:"pagination",children:"Pagination"}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"Sample Pagination"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "defaultPagination": 20\n}\n'})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["If no ",(0,s.jsx)(n.code,{children:"__limit"})," query param is provided, at most 20 records will be returned by default"]}),"\n"]})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Used to set the default number of records to be returned in GET ",(0,s.jsx)(n.em,{children:"all"})," requests if the ",(0,s.jsx)(n.code,{children:"__limit"})," param is not specified"]}),"\n",(0,s.jsx)(n.li,{children:"It must be a non-zero positive number, hence pagination is not optional"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>o});var s=i(6540);const l={},r=s.createContext(l);function d(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);